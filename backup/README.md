# macOS Defaults Backup System

This directory contains scripts to backup and restore your macOS system preferences before and after running dotfiles installation.

## Files

### Backup Scripts
- `backup-current-defaults.sh` - Backs up only the settings that `set-defaults.sh` will modify
- `create-full-backup.sh` - Creates a comprehensive backup of many macOS system preferences

### Generated Backup Files
- `macos_defaults_backup_YYYYMMDD_HHMMSS.sh` - Restore scripts generated by the backup scripts
- `full_macos_backup_YYYYMMDD_HHMMSS.sh` - Comprehensive restore scripts

## Usage

### Before Running Dotfiles Installation

1. **Quick backup** (only settings that will be changed):
   ```bash
   ./backup/backup-current-defaults.sh
   ```

2. **Comprehensive backup** (recommended):
   ```bash
   ./backup/create-full-backup.sh
   ```

### After Installation (to restore settings)

Run any of the generated backup files:
```bash
./backup/macos_defaults_backup_20250828_061422.sh
```

## What Gets Backed Up

### Quick Backup (`backup-current-defaults.sh`)
- Press-and-hold vs key repeat settings
- AirDrop interface settings
- Finder view preferences
- Key repeat rate
- Desktop icon visibility (external drives, removable media)
- Dock hot corner settings
- Safari bookmark bar and development settings
- Library folder visibility

### Comprehensive Backup (`create-full-backup.sh`)
Everything in the quick backup plus:
- Additional Finder settings (path bar, status bar, search scope)
- Complete Dock configuration (size, position, all hot corners)
- Screenshot settings (location, format, shadows)
- Terminal default settings
- Menu bar and Control Center preferences
- System-wide file extension and scroll bar settings

## Current Backup Status

âœ… **Backup Created**: `macos_defaults_backup_20250828_061422.sh`

**Your current settings before dotfiles installation:**
- Most macOS defaults were at system defaults (not customized)
- External drives and removable media are shown on desktop
- Safari development menu was disabled
- Library folder was hidden (standard macOS behavior)

## Restoration Notes

- Some changes require logging out and back in
- A few settings may need a full system restart
- The restore scripts will automatically restart affected applications (Finder, Dock, Safari)

## Safety

These backup scripts only modify the specific settings they backed up. They won't affect other system preferences or installed applications.
